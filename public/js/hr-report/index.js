!function(e){var t={};function a(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=t,a.d=function(e,t,o){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(o,r,function(t){return e[t]}.bind(null,r));return o},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/",a(a.s=42)}({42:function(e,t,a){e.exports=a("sFZ1")},sFZ1:function(e,t){function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e<=0?companyScoreColorCode.red:e>=60&&e<80?companyScoreColorCode.yellow:e>=80&&e<=100?companyScoreColorCode.green:companyScoreColorCode.red}function r(e){var t=new Array;$(e).each((function(){$(this).css("min-height","0"),$(this).css("max-height","none"),$(this).css("height","auto"),t.push($(this).height())}));var a=Math.max.apply(Math,t);$(e).each((function(){$(this).css("height",a+"px")}))}function n(e,t,n){var s=urls.detailsUrl.replace(":companyId",e).replace(":departmentId",t).replace(":categoryId",n),c=moment(),i=moment($("#detailsFromMonth").datepicker("getDate")),d=moment($("#detailsToMonth").datepicker("getDate")).endOf("month"),l={};d>c&&(d=c),l.from=i.format("YYYY-MM-DD 00:00:00"),l.to=d.format("YYYY-MM-DD 23:59:59"),$.ajax({url:s,type:"GET",dataType:"json",data:l}).done((function(e){if(null!=e.status&&0==e.status)return toastr.error(e.data||"Failed to load graph."),void $("#report-details-block").hide();if($("#details_no_data").hide(),$("#chart-area").show(),e&&e.performance){var t=o($("#hrReportManagement .report-details.selected").data("score"));"object"!=a(charts.departmentScoreLineGraph.object)&&(charts.departmentScoreLineGraph.object=new Chart(charts.departmentScoreLineGraph.selector,charts.departmentScoreLineGraph.options)),charts.departmentScoreLineGraph.options.data.labels=e.performance.labels,charts.departmentScoreLineGraph.options.data.datasets[0].data=e.performance.data,charts.departmentScoreLineGraph.options.data.datasets[0].borderColor=t,charts.departmentScoreLineGraph.options.data.datasets[0].pointBackgroundColor=t,charts.departmentScoreLineGraph.object.update()}if(e&&e.subcategories&&e.subcategories.length>0){$("#no_data_subcategory").hide();var n="",s=$("#subCategoryTabTemplate").text().trim();charts.subCategoryWiseDepartmentGaugeCharts=[],$(e.subcategories).each((function(e,t){n+=s.replace("#id#",t.sub_category_id).replace("#sub_category_name#",t.subcategory_name).replace("#sub_category_percentage#",t.percentage).replace(/#background-color#/g,o(t.percentage))})),$("#subCategoryWiseDepartmentGraph").html(n).show(),r($("#subCategoryWiseDepartmentGraph .score-status")),$(e.subcategories).each((function(e,t){var a=$("[data-subcategorywisedepartmentscoregaugechart-".concat(t.sub_category_id,"]"))[0],r=o(t.percentage);charts.subCategoryWiseDepartmentGaugeCharts[e]=new Gauge(a).setOptions(charts.gaugeChartOptions),charts.subCategoryWiseDepartmentGaugeCharts[e].setMinValue(0),charts.subCategoryWiseDepartmentGaugeCharts[e].maxValue=100,charts.subCategoryWiseDepartmentGaugeCharts[e].options.colorStart=r,charts.subCategoryWiseDepartmentGaugeCharts[e].set(t.percentage)}))}else $("#subCategoryWiseDepartmentGraph").empty().hide(),$("#no_data_subcategory").show()})).fail((function(e){$("#details_no_data").show(),$("#subCategoryWiseDepartmentGraph").html("").hide(),$("#no_data_subcategory").hide(),toastr.error("Failed to load graph.")})).always((function(){$("#details_loader").hide()}))}$(window).resize((function(){var e;$("#subCategoryWiseDepartmentGraph .score-status").length>0&&(null!==e&&window.clearTimeout(e),e=setTimeout((function(){r($("#subCategoryWiseDepartmentGraph .score-status"))}),120))})),$(document).ready((function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$("#monthranges").datepicker({format:"M, yyyy",startView:1,minViewMode:1,maxViewMode:2,clearBtn:!0,autoclose:!0,endDate:moment().isSame(moment().endOf("month"),"date")?moment().endOf("month").add(1,"d").toDate():moment().endOf("month").toDate()}),$("#detailsmonthranges").datepicker({format:"M, yyyy",startView:1,minViewMode:1,maxViewMode:2,clearBtn:!1,autoclose:!0,endDate:moment().isSame(moment().endOf("month"),"date")?moment().endOf("month").add(1,"d").toDate():moment().endOf("month").toDate()}),$("#globalFromMonth").datepicker("setDate",null!=requestParams.from?moment(requestParams.from).toDate():""),$("#globalToMonth").datepicker("setDate",null!=requestParams.to?moment(requestParams.to).toDate():""),requestParams.from&&requestParams.to&&(dtPayload.from=requestParams.from,dtPayload.to=requestParams.to),categories=$.parseJSON(categories),$(categories).each((function(e,t){columns.push({data:t.name,name:t.name,className:"text-center hr-scor-link score-cell",render:function(e,t,a,o){var r=o.settings.aoColumns[o.col],n=r.mData,s=r.catId||0;return'<a href=\'javascript:void(0);\' class="d-block text-white report-details" data-score="'.concat(e,'" data-company="').concat(a.company_id,'" data-category="').concat(s,'" data-department="').concat(a.department_id,'" data-company-name="').concat(a.company_name,'" data-category-name="').concat(n,'" data-department-name="').concat(a.department_name,"\"><span class='score-list'>").concat(e,"</span></a>")}})})),columns.push({data:"score",name:"score",className:"text-center",render:function(e,t,a){return'<div class="round-score" style="background-color: '.concat(o(e),';">').concat(e,"%</div>")}}),$("#hrReportManagement").DataTable({processing:!0,serverSide:!0,ajax:{type:"POST",url:urls.datatable,data:dtPayload},columns:columns,pageLength:pagination.value,lengthChange:!1,searching:!1,order:[],autoWidth:!1,columnDefs:[{targets:"score-cell",createdCell:function(e,t,a,r,n){$(e).css("background-color",o($("a.report-details",e).data("score")||t))}},{targets:"no-sort",orderable:!1}],dom:'<<"pagination-top"lB><t><"pagination-wrap"<"pagination-left"i>p>',drawCallback:function(e,t,a,o,r){var n=this.api();$(n.columns().footer()).removeClass("hr-scor-link score-cell"),0==n.rows().count()?$("#hrReportManagement tfoot").hide():$("#hrReportManagement tfoot").show()},fnDrawCallback:function(e){e._iDisplayLength>e.fnRecordsDisplay()?$(e.nTableWrapper).find(".dataTables_paginate, .dataTables_info").hide():$(e.nTableWrapper).find(".dataTables_paginate, .dataTables_info").show()},language:{paginate:{previous:pagination.previous,next:pagination.next}}}),$("#detailsmonthranges").on("changeDate",(function(e){var t=$(this).data("datepicker"),a=$(this).data("isManualUpdating")||!1;if(!t.updating&&0==a){var o=moment(),r=(moment(t.pickers[0].getDate()),moment(t.pickers[1].getDate()).endOf("month"));new Object;r>o&&(r=o);var s=$("#hrReportManagement .report-details.selected");s.length>0&&n($(s).data("company"),$(s).data("department"),$(s).data("category"))}})),$(document).on("click",".report-details",(function(e){var t=$(this).data("company")||0,a=$(this).data("department")||0,o=$(this).data("category")||0,r=moment(),s=moment($("#globalFromMonth").datepicker("getDate")),c=moment($("#globalToMonth").datepicker("getDate")).endOf("month");o>0&&a>0&&(""!=$("#globalFromMonth").val()&&""!=$("#globalToMonth").val()?c>r&&(c=r):(s=moment().subtract(5,"months"),c=moment()),$("#detailsmonthranges").data("isManualUpdating",!0),$("#detailsFromMonth").datepicker("setDate",s.toDate()),$("#detailsToMonth").datepicker("setDate",c.toDate()),$("#detailsmonthranges").data("isManualUpdating",!1),$("#card-title").html("".concat($(this).data("category-name")," - ").concat($(this).data("department-name"),"(").concat($(this).data("company-name"),")")),$("#hrReportManagement .report-details").removeClass("selected"),$(this).addClass("selected"),$("#report-details-block, #details_loader").show(),$("#details_no_data, #chart-area").hide(),$("html, body").animate({scrollTop:$("#report-details-block").offset().top-65},1e3),n(t,a,o))})),$(document).on("click",".back-to-report",(function(e){$("#hrReportManagement .report-details").removeClass("selected"),$("html, body").animate({scrollTop:0},1e3)})),$(document).on("click","#hrReportSearchSubmitFrm",(function(e){e.preventDefault();var t=$("#hrReportSearch").attr("action"),a=moment(),o=moment($("#globalFromMonth").datepicker("getDate")),r=moment($("#globalToMonth").datepicker("getDate")).endOf("month"),n=$("#company").val()||0,s={};""!=$("#globalFromMonth").val()&&""!=$("#globalToMonth").val()?(r>a&&(r=a),s.from=o.format("YYYY-MM-DD 00:00:00"),s.to=r.format("YYYY-MM-DD 23:59:59")):$("#globalFromMonth, #globalToMonth").val(""),n>0&&(s.company=n);var c=$.param(s);window.location.href=t+(""!=c?"?"+c:"")}))}))}});