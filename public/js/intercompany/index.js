!function(e){var t={};function a(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(r,o,function(t){return e[t]}.bind(null,o));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/",a(a.s=89)}({89:function(e,t,a){e.exports=a("lgPJ")},lgPJ:function(e,t){function a(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}$(document).ready((function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$("#company").prop("disabled",!0),$(".select2").select2(),$(".ICReportTeam-export").hide(),$(".ICReportCompany-export").hide(),$(document).on("shown.bs.tab",'#myTab a[data-bs-toggle="tab"]',(function(e){var t=$(e.target).data("for"),a="company"==t?"ICReportCompany":"ICReportTeam";$(".ICReportCompany-export").hide(),$(".ICReportTeam-export").hide(),$.fn.DataTable.isDataTable("#ICReportCompany")&&($("#ICReportCompany").DataTable().clear(),$("#ICReportCompany").DataTable().destroy()),$.fn.DataTable.isDataTable("#ICReportTeam")&&($("#ICReportTeam").DataTable().clear(),$("#ICReportTeam").DataTable().destroy()),$("#".concat(a," tbody")).html('<tr><td class="text-center no-data-table" colspan="5">'+message.please_select_challenge+"</td></tr>"),$("#ICReportCompany, #ICReportTeam").parent().toggleClass("hidden"),$("#challenge").val("").trigger("change"),$("#company").empty().prop("disabled",!0),$("#company").select2("destroy").select2()})),$(document).on("change","#challenge",(function(e){var t=$("#challenge").val();type=$("#myTab .nav-link.active").data("for"),""!=t?"team"!=type&&"company"!=type||function(e){$.get(url.getICReportChallengeComapnies,{challengeId:e},(function(e,t,a){if(200==a.status&&e&&1==e.status){var r="";$.each(e.data,(function(e,t){r+='<option value="'.concat(e,'">').concat(t,"</option>")})),$("#company").html(r).val("").prop("disabled",!1),$("#company").select2("destroy").select2()}else toastr.clear(),toastr.error(message.failed_load_companies)}))}(t):($("#company").empty(),$("#company").select2("destroy").select2())})),$(document).on("submit","#interCompanyReportSearch",(function(e){if(e.preventDefault(),""!=$("#challenge").val()){var t=$("#myTab .nav-link.active").data("for"),a="company"==t?"ICReportCompany":"ICReportTeam",o={},n=[];"company"==t?n=[{data:"rank",name:"rank"},{data:"company_name",name:"company_name"},{data:"total_teams",name:"total_teams"},{data:"total_users",name:"total_users"},{data:"points",name:"points"}]:"team"==t&&(n=[{data:"rank",name:"rank"},{data:"team_name",name:"team_name"},{data:"company_name",name:"company_name"},{data:"points",name:"points"}]),o.columns=n,function(e,t){var a=r(r({},{destroy:!0,processing:!0,serverSide:!0,ajax:{url:url.getICReportChallengeData,data:{type:$("#myTab .nav-link.active").data("for"),challenge:$("#challenge").val(),company:$("#company").val(),getQueryString:window.location.search}},columns:[],paging:!0,pageLength:pagination.value,lengthChange:!0,lengthMenu:[[25,50,100,-1],[25,50,100,"All"]],searching:!1,ordering:!0,order:[[0,"asc"]],info:!0,autoWidth:!1,columnDefs:[{targets:"no-sort",orderable:!1}],stateSave:!1,language:{paginate:{previous:pagination.previous,next:pagination.next},lengthMenu:pagination.entry_per_page+" _MENU_"},dom:'<<"pagination-top"lB><t><"pagination-wrap"<"pagination-left"i>p>',buttons:[],drawCallback:function(e){var t=$("#myTab .nav-link.active").data("for");0==this.api().rows().count()?"company"==t?$(".ICReportCompany-export").hide():$(".ICReportTeam-export").hide():"company"==t?$(".ICReportCompany-export").show():$(".ICReportTeam-export").show()}}),t);$("#"+e).DataTable(a)}(a,o)}})),$(".daterangesFromExportModel").datepicker({format:"yyyy-mm-dd",todayHighlight:!1,autoclose:!0,endDate:new Date,clearBtn:!0}),$(document).on("click","#exportInterCompanyReport",(function(e){$(this).attr("data-start"),$(this).attr("data-end");var t=$("#interCompanyReportSearch").serialize();$("#queryString").val(JSON.stringify(function(e){$(".daterangesFromExportModel").show();var t=e.substring(1).split("&").map((function(e){var t=e.split("=");return""!=t[1]&&$(".daterangesFromExportModel").hide(),t}));return Object.fromEntries(t)}("?"+t)));var a=$(this).attr("data-tab");$("#email").val(loginemail).removeClass("error"),$("#tab").val(a),$(".error").remove(),$("#model-title").html($(this).data("title")),$("#exportNpsReport").attr("action",url.interCompanyReportExportUrl),$(".loadingMsg").remove(),$("#export-model-box-confirm").prop("disabled",!1),$("#exportNpsReportMsg").hide(),$("#exportNps").show(),$("#export-model-box").attr("data-id",$(this).data("id")),$("#export-model-box").modal("show")})),$("#exportNpsReport").validate({errorClass:"error text-danger",errorElement:"span",highlight:function(e,t,a){$("span#email-error").addClass(t).removeClass(a)},unhighlight:function(e,t,a){$("span#email-error").removeClass(t).addClass(a)},rules:{email:{email:!0,required:!0}}}),$("#exportNpsReport").ajaxForm({beforeSend:function(){$(".page-loader-wrapper").fadeIn(),$("#exportNpsReport .card-footer button, #exportIntercompanychallenge .card-footer a").attr("disabled","disabled")},success:function(e){$("#exportNpsReport .card-footer button, #exportIntercompanychallenge .card-footer a").removeAttr("disabled"),$("#export-model-box").modal("hide"),1==e.status?toastr.success(e.data):toastr.error(e.data)},error:function(e){$("#exportNpsReport .card-footer button, #exportIntercompanychallenge .card-footer a").removeAttr("disabled"),e.responseJSON&&e.responseJSON.message&&""!=e.responseJSON.message?toastr.error(e.responseJSON.message):toastr.error(message.somethingWentWrong)},complete:function(e){$(".page-loader-wrapper").fadeOut(),$("#exportNpsReport .card-footer button, #exportIntercompanychallenge .card-footer a").removeAttr("disabled")}})}))}});