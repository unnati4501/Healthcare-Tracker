!function(e){var t={};function a(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=t,a.d=function(e,t,o){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(o,r,function(t){return e[t]}.bind(null,r));return o},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/",a(a.s=119)}({119:function(e,t,a){e.exports=a("tlaJ")},tlaJ:function(e,t){function a(){var e=$("#fromdepartment").val(),t=$("#todepartment").val(),a=$("#fromteam").val(),o=$("#toteam").val();""!=e&&null!=e&&""!=t&&null!=t&&""!=a&&null!=a&&""!=o&&null!=o?(showPageLoaderWithMessage(message.loading_team_members),$.ajax({url:urls.getTeamMembers.replace(":ids",[a,o].toString()),type:"GET",dataType:"json"}).done((function(e){if(e.status&&1==e.status){$("#fromTeamMembersList .draggable-outer, #toTeamMembersList .draggable-outer").removeClass("limit-error"),$("#fromTeamMembersList").data("id",a).data("default",e.data.default[a]),$("#toTeamMembersList").data("id",o).data("default",e.data.default[o]),$("#fromTeamMembersList .name").html($("#fromteam option:selected").text()),$("#toTeamMembersList .name").html($("#toteam option:selected").text()),$("#fromTeamMembersList .draggable").html(e.data[a]),$("#toTeamMembersList .draggable").html(e.data[o]),$("#limit").val(e.data.limit);var t=$("#fromTeamMembersList .draggable li").length,r=$("#toTeamMembersList .draggable li").length;e.data.default[a]?$("#fromCount").html("".concat(t)):$("#fromCount").html(e.data.limit>0?"".concat(t," out of ").concat(e.data.limit):"".concat(t)),e.data.default[o]?$("#toCount").html("".concat(r)):$("#toCount").html(e.data.limit>0?"".concat(r," out of ").concat(e.data.limit):"".concat(r)),$("#teamAssignment").removeClass("d-none"),teamAssignment.sortable("refresh")}else alert(message.failed_to_load_team_members)})).fail((function(e){alert(message.failed_to_load_team_members)})).always((function(){hidesPageLoader()}))):$("#teamAssignment").addClass("d-none")}$(document).ready((function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$("#fromteam").attr("disabled",!0),$("#toteam").attr("disabled",!0),teamAssignment=$(".draggable").sortable({group:"draggable",pullPlaceholder:!1,isValidTarget:function(e,t){return!0},onDrop:function(e,t,a){a(e,t),$("#fromTeamMembersList .draggable-outer, #toTeamMembersList .draggable-outer").removeClass("limit-error");var o=parseInt($("#limit").val()||0),r=$("#fromTeamMembersList").data("default")||!1,m=$("#toTeamMembersList").data("default")||!1,n=$("#fromTeamMembersList .draggable li").length,l=$("#toTeamMembersList .draggable li").length;!r&&o>0&&n>o&&$("#fromTeamMembersList .draggable-outer").addClass("limit-error"),!m&&o>0&&l>o&&$("#toTeamMembersList .draggable-outer").addClass("limit-error"),1==$("#fromTeamMembersList").data("default")?$("#fromCount").html("".concat(n)):$("#fromCount").html(o>0?"".concat(n," out of ").concat(o):"".concat(n)),1==$("#toTeamMembersList").data("default")?$("#toCount").html("".concat(l)):$("#toCount").html(o>0?"".concat(l," out of ").concat(o):"".concat(l))},serialize:function(e,t,a){return a?e.find("li").map((function(e,t){return $(t).data("id")})):e.data("id")}}),setTimeout((function(){null!=$("#fromdepartment").val()&&""!=$("#fromdepartment")&&$("#fromdepartment").trigger("change"),null!=$("#todepartment").val()&&""!=$("#todepartment")&&$("#todepartment").trigger("change")}),2e3),$(document).on("change","#fromdepartment, #todepartment",(function(e){var t=$(this).val(),o="fromdepartment"==e.target.name?"#fromteam":"#toteam",r="fromdepartment"==e.target.name?Qsfromteam:Qstoteam,m="";if(""!=t&&null!=t){var n=urls.getTeams.replace(":id",t);$.get(n,(function(e){if(e.code&&200==e.code){$.each(e.result,(function(e,t){m+='<option value="'.concat(t.id,'">').concat(t.name,"</option>")})),$(o).html(m).val(r).trigger("change"),$(o).attr("disabled",!1);var t=$("#fromteam").val(),n=$("#toteam").val();"#toteam"==o&&null!=t&&""!=t&&$("#toteam").find("option").length>0?($("#toteam").find("option").removeAttr("disabled"),$("#toteam").find("option[value='".concat(t,"']")).attr("disabled","disabled"),$("#toteam").select2("destroy").select2()):"#fromteam"==o&&null!=n&&""!=n&&$("#fromteam").find("option").length>0&&($("#fromteam").find("option").removeAttr("disabled"),$("#fromteam").find("option[value='".concat(n,"']")).attr("disabled","disabled"),$("#fromteam").select2("destroy").select2()),"#toteam"==o&&Qsfromdepartment==Qstodepartment&&Qsfromteam==Qstoteam&&($("#toteam").val(""),$("#toteam").find("option[value='".concat(Qsfromteam,"']")).attr("disabled","disabled"),$("#toteam").select2("destroy").select2()),a()}else alert(message.failed_to_load_team)}),"json")}else a(),$(o).empty().val("").trigger("change")})),$(document).on("change","#toteam",(function(e){var t=$(this).val();$("#fromteam").find("option").removeAttr("disabled"),null!=t&&""!=t&&$("#fromteam").find("option[value='".concat(t,"']")).attr("disabled","disabled"),$("#fromteam").data("select2")&&$("#fromteam").select2("destroy").select2(),a()})),$(document).on("change","#fromteam",(function(e){var t=$(this).val();null!=t&&""!=t?($("#toteam").find("option").removeAttr("disabled"),$("#toteam").find("option[value='".concat(t,"']")).attr("disabled","disabled"),$("#toteam").data("select2")&&$("#toteam").select2("destroy").select2()):($("#toteam").find("option").removeAttr("disabled"),$("#toteam").data("select2")&&$("#toteam").select2("destroy").select2()),a()})),$(document).on("keyup",".search-member",(function(e){var t=$.trim($(this).val()).replace(/ +/g," ").toLowerCase(),a=$(this).data("control");$("#".concat(a)).find("li").show().filter((function(){return!~$(this).text().replace(/\s+/g," ").toLowerCase().indexOf(t)})).hide()})),$(document).on("keydown",".search-member",(function(e){if(13==e.keyCode)return e.preventDefault(),!1})),$(document).on("submit","#teamAssignmentFrm",(function(e){if($(".toast").remove(),1==$(this).valid()){var t=$("#fromteam").val(),a=$("#toteam").val(),o=parseInt($("#limit").val()||0),r=$("#fromTeamMembersList .draggable").find('li[data-team="'.concat(a,'"]')),m=$("#toTeamMembersList .draggable").find('li[data-team="'.concat(t,'"]')),n=$("#fromTeamMembersList").data("default")||!1,l=$("#toTeamMembersList").data("default")||!1,i=[],s=[];if($("#fromteammembers, #toteammembers").val(""),$("#fromTeamMembersList .draggable-outer, #toTeamMembersList .draggable-outer").removeClass("limit-error"),r.length>0||m.length>0){if(r.length>0){if(!n&&o>0&&$("#fromTeamMembersList .draggable li").length>o)return $("#fromTeamMembersList .draggable-outer").addClass("limit-error"),$(".toast").remove(),toastr.error("".concat($("#fromteam option:selected").text()," ")+message.team_reach_team_limit),e.preventDefault(),!1;$.each(r,(function(e,t){i.push(t.dataset.id)})),""!=(i=i.toString())&&$("#fromteammembers").val(i)}if(m.length>0){if(!l&&o>0&&$("#toTeamMembersList .draggable li").length>o)return $("#toTeamMembersList .draggable-outer").addClass("limit-error"),$(".toast").remove(),toastr.error("".concat($("#toteam option:selected").text()," ")+message.team_reach_team_limit),e.preventDefault(),!1;$.each(m,(function(e,t){s.push(t.dataset.id)})),""!=(s=s.toString())&&$("#toteammembers").val(s)}return $("#teamAssignmentFrm").ajaxSubmit({beforeSend:function(e){$(".page-loader-wrapper").show()},success:function(e){e.status&&1==e.status&&window.location.replace(e.url)},error:function(e){var t;toastr.error((null==e||null===(t=e.responseJSON)||void 0===t?void 0:t.data)||message.something_wrong_try_again)},complete:function(){$(".page-loader-wrapper").hide()}}),e.preventDefault(),!1}return toastr.error(message.select_atleast_one_member),e.preventDefault(),!1}}))}))}});