!function(e){var a={};function t(r){if(a[r])return a[r].exports;var i=a[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=a,t.d=function(e,a,r){t.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,a){if(1&a&&(e=t(e)),8&a)return e;if(4&a&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var i in e)t.d(r,i,function(a){return e[a]}.bind(null,i));return r},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},t.p="/",t(t.s=136)}({136:function(e,a,t){e.exports=t("dZNI")},dZNI:function(e,a){function t(e,a){if(null!=e&&e.files.length>0){var r=new FileReader;r.onload=function(r){var i=new Image;i.src=r.target.result,i.onload=function(){var r=$(e).data("width"),i=$(e).data("height"),o=$(e).data("ratio"),l=o,n=o.split(":"),s=n[0],d=n[1],c=gcd(this.width,this.height,d,s);(this.width<r&&this.height<i||c!=l)&&($(e).empty().val(""),$(e).parent("div").find(".custom-file-label").html("Choose File"),$(e).parent("div").find(".invalid-feedback").remove(),$(a).removeAttr("src"),toastr.error(message.upload_image_dimension),t(null,a))},$(a).attr("src",r.target.result)},r.readAsDataURL(e.files[0])}else $(a).removeAttr("src")}$(document).ready((function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},timeout:12e5}),$("select#map_companies").treeMultiselect({enableSelectAll:!0,searchParams:["section","text"],searchable:!0,startCollapsed:!0,onChange:function(e,a,t){0==$("#map_companies").val().length?($("#AddChallengeMap").valid(),$("#map_companies").addClass("is-invalid"),$("#map_companies-error").show(),$(".tree-multiselect").css("border-color","#f44436")):($("#map_companies").removeClass("is-invalid"),$("#map_companies-error").hide(),$(".tree-multiselect").css("border-color","#D8D8D8"))}}),$(document).on("change","#image",(function(e){var a=$(this).data("previewelement");if(e.target.files.length>0){var r=e.target.files[0].name;["image/png","image/jpeg","image/jpg"].includes(e.target.files[0].type)?e.target.files[0].size>2097152?(toastr.error(message.image_size_2M_error),$(e.currentTarget).empty().val(""),$(this).parent("div").find(".custom-file-label").html("Choose File"),t(null,a)):(t(e.target,a),$(this).parent("div").find(".custom-file-label").html(r)):(toastr.error(message.image_valid_error),$(e.currentTarget).empty().val(""),$(this).parent("div").find(".custom-file-label").html("Choose File"),t(null,a))}else $(this).parent("div").find(".custom-file-label").html("Choose File"),t(null,a)})),$(document).on("change","#propertyimage",(function(e){var a=$(this).data("previewelement");if(e.target.files.length>0){var r=new FileReader;r.onloadend=function(){$("#base64Img").val(r.result)},r.readAsDataURL(e.target.files[0]);var i=e.target.files[0].name;["image/png","image/jpeg","image/jpg"].includes(e.target.files[0].type)?e.target.files[0].size>2097152?(toastr.error(message.image_size_2M_error),$(e.currentTarget).empty().val(""),$(this).parent("div").find(".custom-file-label").html("Choose File"),t(null,a)):(t(e.target,a),$(this).parent("div").find(".custom-file-label").html(i)):(toastr.error(message.image_valid_error),$(e.currentTarget).empty().val(""),$(this).parent("div").find(".custom-file-label").html("Choose File"),t(null,a))}else $(this).parent("div").find(".custom-file-label").html("Choose File"),t(null,a)})),$(document).on("click","#zevo_update_btn",(function(){0==$("#map_companies").val().length?(event.preventDefault(),$("#EditChallengeMap").valid(),$("#map_companies").addClass("is-invalid"),$("#map_companies-error").show(),$(".tree-multiselect").css("border-color","#f44436")):($("#map_companies").removeClass("is-invalid"),$("#map_companies-error").hide(),$(".tree-multiselect").css("border-color","#D8D8D8"))})),$(document).on("click",".map-remove",(function(){var e=$(this).attr("id"),a=$(this).attr("recordsId");$("#delete-location-model-box").attr("data-id",e),$("#delete-location-model-box").attr("data-recordsid",a),$("#delete-location-model-box").modal("show")})),$(document).on("click","#delete-location-model-box-confirm",(function(e){$(this);var a=$("#delete-location-model-box").attr("data-id");recordsId=$("#delete-location-model-box").attr("data-recordsid");a=a.split("_")[1];if($(".page-loader-wrapper").show(),recordsId<=0){$("#location_"+a).val();var t=a-1;locationArray.splice(t,1),$("#tr_"+a).remove(),locationArray.length<=0&&($("#totalLocations").val(""),$("#mapDiv").attr("class","col-lg-12")),$("#totalLocations").val(locationArray.length),initMap(),toastr.success(message.deleted),$("#delete-location-model-box").modal("hide"),$(".page-loader-wrapper").hide()}else $.ajax({type:"DELETE",url:url.deleteLocation+"/".concat(recordsId),crossDomain:!0,cache:!1,contentType:"json"}).done((function(e){if(1==e.status.deleted){toastr.success(message.deleted);$("#location_"+a).val();var t=a-1;locationArray.splice(t,1),$("#tr_"+a).remove(),locationArray.length<=0&&($("#totalLocations").val(""),$("#mapDiv").attr("class","col-lg-12")),$("#total_distance").val(e.totalDistance),$("#total_steps").val(e.totalSteps),$("#totalLocations").val(e.totalLocation),initMap()}else toastr.error(message.somethingWentWrong);$(".page-loader-wrapper").hide(),$("#delete-location-model-box").modal("hide")})).fail((function(e){"Forbidden"==e&&toastr.error(message.somethingWentWrong),$(".page-loader-wrapper").hide(),$("#delete-location-model-box").modal("hide")})).always((function(){$("#delete-location-model-box").modal("hide"),$(".page-loader-wrapper").hide()}))})),$(document).on("change","#location_type",(function(){2==$(this).val()?$(".location_name_div,.location_upload_files_div").hide():($(".propertyimage-label").html("Choose File"),$("#propertyimage_preview").attr("src",url.commonImage),$(".location_name_div,.location_upload_files_div").show())})),$(document).on("click",".map-edit",(function(){var e=$(this).attr("recordsid"),a=$(this).attr("id").split("_")[1];$(".page-loader-wrapper").show();var t=null;($("#location_type-error").remove(),$("#location_name-error").remove(),$("#distance-error").remove(),$("#steps-error").remove(),$("#propertyimage-error").remove(),$(".propertyimage-label").html("Choose File"),$("#propertyimage_preview").attr("src",url.commonImage),1!=a)&&(t=$("#mapedit_"+(a-1)).attr("recordsid"));$.ajax({type:"GET",url:url.getLocation+"/".concat(e)+"?previousId="+t,crossDomain:!0,cache:!1,contentType:"json"}).done((function(e){$(".page-loader-wrapper").hide();var t="",r="",i="",o="",l="";$("#property-label-id").html(a),1==a?($("#distanceDiv,#stepsDiv").hide(),$("#distance").val("")):$("#distanceDiv,#stepsDiv").show(),$("#num").val(a),Object.keys(e).length>0?(e.property.lat.length>0&&e.property.lng.length>0&&(t=e.property.lat+","+e.property.lng),e.property.hasOwnProperty("locationType")&&(r=e.property.locationType),e.property.hasOwnProperty("locationName")&&(i=e.property.locationName),o=e.property.hasOwnProperty("distance")?e.property.distance:e.distance,l=e.property.hasOwnProperty("steps")?e.property.steps:e.steps,$("#property_id").val(e.id),$("#lat_long").val(t),""!=r?($("#location_type").val(r).select2(),1==a?$("#location_type").attr("disabled",!0):$("#location_type").attr("disabled",!1)):1==a?$("#location_type").val(1).select2().attr("disabled",!0):$("#location_type").val("").select2("").attr("disabled",!1),$("#location_name").val(i),a>1&&($("#distance").val(o),$("#steps").val(l)),e.imageName.length>0?($(".propertyimage-label").html(e.imageName),$("#propertyimage_preview").attr("src",e.imageUrl)):($(".propertyimage-label").html("Choose File"),$("#propertyimage_preview").attr("src",url.commonImage)),2==r?$(".location_name_div,.location_upload_files_div").hide():$(".location_name_div,.location_upload_files_div").show()):($("#property_id").val(""),$("#lat_long").val($("#location_"+a).val()),$("#location_type").val(r).select2(),$("#location_name").val(i),$("#distance").val(o),$("#steps").val(l),$(".propertyimage-label").html("Choose File"),$("#propertyimage_preview").attr("src",url.commonImage),2==r?$(".location_name_div,.location_upload_files_div").hide():$(".location_name_div,.location_upload_files_div").show())})).fail((function(e){"Forbidden"==e&&toastr.error(message.somethingWentWrong),$(".page-loader-wrapper").hide()})).always((function(){$(".page-loader-wrapper").hide()}))})),$(document).on("click","#save-property",(function(){var e=$("#property_id").val(),a=$("#lat_long").val(),t=$("#location_type").val(),r=$("#location_name").val(),i=$("#distance").val(),o=$("#steps").val(),l=$("#num").val(),n=document.getElementById("propertyimage").files[0],s=/^[0-9-+()]*$/,d=[],c=$(".propertyimage-label").html();$("#location_type-error").remove(),$("#location_name-error").remove(),$("#distance-error").remove(),$("#steps-error").remove(),$("#propertyimage-error").remove(),1==(t.length>0?t:1)&&(null==n&&"Choose File"==c?(!1,d.push("image"),$("#propertyimage").addClass("is-invalid").attr("aria-describedby","propertyimage-error").next().after('<div id="propertyimage-error" class="invalid-feedback custom-validate">'+validation.property_upload_required+"</div>")):(d=$.grep(d,(function(e){return"image"!=e})),!0,$("#propertyimage-error").remove(),$("#propertyimage").removeClass("is-invalid").attr("aria-describedby","")),r.length<=0?(!1,d.push("name"),$("#location_name").addClass("is-invalid").attr("aria-describedby","location_name-error").after('<div id="location_name-error" class="invalid-feedback custom-validate">'+validation.location_required+"</div>")):r.length>50?(!1,d.push("name"),$("#location_name").addClass("is-invalid").attr("aria-describedby","location_name-error").after('<div id="location_name-error" class="invalid-feedback custom-validate">'+validation.location_greater_char+"</div>")):(d=$.grep(d,(function(e){return"name"!=e})),!0,$("#location_name-error").remove(),$("#location_name").removeClass("is-invalid").attr("aria-describedby",""))),t.length<=0?(!1,d.push("type"),$("#location_type").addClass("is-invalid").attr("aria-describedby","location_type-error").next().after('<div id="location_type-error" class="invalid-feedback custom-validate">'+validation.location_type_required+"</div>")):(!0,d=$.grep(d,(function(e){return"type"!=e})),$("#location_type-error").remove(),$("#location_type").removeClass("is-invalid").attr("aria-describedby","")),l>1&&(i.length<=0?(!1,d.push("distance"),$("#distance").addClass("is-invalid").attr("aria-describedby","distance-error").next().after('<div id="distance-error" class="invalid-feedback custom-validate">'+validation.distance_required+"</div>")):0==s.test(i)?(!1,d.push("distance"),$("#distance").addClass("is-invalid").attr("aria-describedby","distance-error").next().after('<div id="distance-error" class="invalid-feedback custom-validate">'+validation.distance_number+"</div>")):i<=0?(!1,d.push("distance"),$("#distance").addClass("is-invalid").attr("aria-describedby","distance-error").next().after('<div id="distance-error" class="invalid-feedback custom-validate">'+validation.distance_valid_number+"</div>")):(!0,d=$.grep(d,(function(e){return"distance"!=e})),$("#distance-error").remove(),$("#distance").removeClass("is-invalid").attr("aria-describedby","")),o.length<=0?(!1,d.push("steps"),$("#steps").addClass("is-invalid").attr("aria-describedby","steps-error").after('<div id="steps-error" class="invalid-feedback custom-validate">'+validation.steps_required+"</div>")):0==s.test(o)?(!1,d.push("steps"),$("#steps").addClass("is-invalid").attr("aria-describedby","steps-error").after('<div id="steps-error" class="invalid-feedback custom-validate">'+validation.steps_number+"</div>")):o<=0?(!1,d.push("steps"),$("#steps").addClass("is-invalid").attr("aria-describedby","steps-error").after('<div id="steps-error" class="invalid-feedback custom-validate">'+validation.steps_valid_number+"</div>")):(!0,d=$.grep(d,(function(e){return"steps"!=e})),$("#steps-error").remove(),$("#steps").removeClass("is-invalid").attr("aria-describedby",""))),d.length<=0&&($(".page-loader-wrapper").show(),$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},type:"PATCH",url:url.storeProperty,crossDomain:!0,cache:!1,data:{lat_long:a,location_type:t,location_name:r,distance_location:i,steps_location:o,num:l,map_id:$("#map_id").val(),property_id:e,propertyimage:$("#base64Img").val()}}).done((function(e){1==e.status?($("#total_distance").val(e.totalDistance),$("#total_steps").val(e.totalSteps),$("#totalLocations").val(e.totalLocation),$("#mapedit_"+l).attr("recordsid",e.propertiesId),$("#mapdelete_"+l).attr("recordsid",e.propertiesId),toastr.success(e.data)):toastr.error(e.data),$(".page-loader-wrapper").hide()})))})),$(document).on("keyup","#distance",(function(){var e=$(this).val(),a=data.steps*e;$("#steps").val(a)}))}))}});