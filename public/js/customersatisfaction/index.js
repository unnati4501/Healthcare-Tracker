!function(e){var a={};function t(r){if(a[r])return a[r].exports;var o=a[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=a,t.d=function(e,a,r){t.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,a){if(1&a&&(e=t(e)),8&a)return e;if(4&a&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var o in e)t.d(r,o,function(a){return e[a]}.bind(null,o));return r},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},t.p="/",t(t.s=86)}({86:function(e,a,t){e.exports=t("jZly")},jZly:function(e,a){function t(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function r(){var e;$("#NPSFeedBackTable").DataTable((t(e={processing:!0,serverSide:!0,destroy:!0,ajax:{url:url.getNpsData,data:{status:1,isPortal:"0",company:$("#company").val(),feedBackType:$("#feedBackType").val(),getQueryString:window.location.search}},columns:[{data:"survey_received_on",name:"survey_received_on",class:"hidden",visible:!1},{data:"companyName",name:"companyName"},{data:"logo",name:"logo"},{data:"feedback_emoji",name:"feedback_emoji"},{data:"feedback",name:"feedback"},{data:"survey_received_on",name:"survey_received_on",render:function(e,a,t){return moment.utc(t.survey_received_on).format(date_format)}}],dom:'<<"pagination-top"lB><t><"pagination-wrap"<"pagination-left"i>p>',paging:!0,pageLength:pagination.value,lengthChange:!0,lengthMenu:[[25,50,100],[25,50,100]],searching:!1,ordering:!0,order:[[0,"desc"]],info:!0,autoWidth:!1,stateSave:!1,language:{paginate:{previous:pagination.previous,next:pagination.next},lengthMenu:pagination.entry_per_page+" _MENU_"}},"dom",'<<"pagination-top"lB><t><"pagination-wrap"<"pagination-left"i>p>'),t(e,"buttons",[]),t(e,"drawCallback",(function(e){0==this.api().rows().count()?$("#app-tab-result-block .appExport").hide():$("#app-tab-result-block .appExport").show()})),e))}function o(){$("#NPSFeedBackTablePortal").DataTable({processing:!0,serverSide:!0,destroy:!0,ajax:{url:url.getNpsData,data:{status:1,isPortal:"1",company:$("#companyPortal").val(),feedBackType:$("#feedBackTypePortal").val()}},columns:[{data:"survey_received_on",name:"survey_received_on",class:"hidden",visible:!1},{data:"companyName",name:"companyName"},{data:"logo",name:"logo"},{data:"feedback_emoji",name:"feedback_emoji"},{data:"feedback",name:"feedback"},{data:"survey_received_on",name:"survey_received_on",render:function(e,a,t){return moment.utc(t.survey_received_on).format(date_format)}}],paging:!0,pageLength:pagination.value,lengthChange:!0,lengthMenu:[[25,50,100],[25,50,100]],searching:!1,ordering:!0,order:[[0,"desc"]],info:!0,autoWidth:!1,stateSave:!1,language:{paginate:{previous:pagination.previous,next:pagination.next},lengthMenu:pagination.entry_per_page+" _MENU_"},dom:'<<"pagination-top"lB><t><"pagination-wrap"<"pagination-left"i>p>',buttons:[],drawCallback:function(e){0==this.api().rows().count()?$("#portal-tab-result-block .portalExport").hide():$("#portal-tab-result-block .portalExport").show()}})}function n(){$("#ProjectFeedBackTable").DataTable({processing:!0,serverSide:!0,destroy:!0,ajax:{type:"POST",url:url.getProjectData,data:{status:1,projecttextSearch:$("#projecttextSearch").val(),projectStatus:$("#projectStatus").val(),projectcompany:data.isSuperAdmin?$("#projectcompany").val():[],start_date:$("#start_date").val(),end_date:$("#end_date").val(),getQueryString:window.location.search}},columns:[{data:"updated_at",name:"updated_at",class:"hidden",visible:!1},{data:"title",name:"title"},{data:"type",name:"type"},{data:"start_date",name:"start_date"},{data:"end_date",name:"end_date"},{data:"response",name:"response"},{data:"proj_status",name:"proj_status"},{data:"actions",name:"actions",searchable:!1,sortable:!1}],paging:!0,pageLength:pagination.value,lengthChange:!0,lengthMenu:[[25,50,100],[25,50,100]],searching:!1,ordering:!0,order:[[0,"desc"]],info:!0,autoWidth:!1,stateSave:!1,columnDefs:[{targets:7,orderable:!1}],language:{paginate:{previous:pagination.previous,next:pagination.next},lengthMenu:pagination.entry_per_page+" _MENU_"},dom:'<<"pagination-top"lB><t><"pagination-wrap"<"pagination-left"i>p>',buttons:[],drawCallback:function(e){0==this.api().rows().count()?$("#project-tab-result-block .projectExport").hide():$("#project-tab-result-block .projectExport").show()}})}function l(){$("#projecttextSearch").val(""),$("#start_date").val(""),$("#end_date").val(""),data.isSuperAdmin&&$("#projectcompany").val("").trigger("change"),$("#projectStatus").val("").trigger("change"),n()}function c(e){if(e.length>0){var a=$("#appGraphTemplate").text().trim(),t=$("#appgraphBarTemplate").text().trim(),r=$("#appgraphLegendTemplate").text().trim(),o=legends="";$("#app-graph-loader").show(),$("#app-graph-area").empty(),$(e).each((function(e,a){o+=t.replace(/\#feedbackClass#/g,a.class+(length==e&&a.y<=5?" small":"")).replace(/\#percentage#/g,a.y.toFixed(2)).replace(/\#tooltip#/g,"".concat(a.name,": ").concat(a.y.toFixed(2),"%")),legends+=r.replace(/\#feedbackClass#/g,a.class).replace(/\#feedbackName#/g,a.name)})),a=a.replace("#bar#",o).replace("#legend#",legends),$("#app-graph-area").html(a),$("#app-graph-loader").hide()}else $("#app-graph-loader").hide()}function i(e){if(e.length>0){var a=$("#graphTemplate").text().trim(),t=$("#graphBarTemplate").text().trim(),r=$("#graphLegendTemplate").text().trim(),o=legends="";$("#graph-loader").show(),$("#portal-graph-area").empty(),$(e).each((function(e,a){o+=t.replace(/\#feedbackClass#/g,a.class+(length==e&&a.y<=5?" small":"")).replace(/\#percentage#/g,a.y.toFixed(2)).replace(/\#tooltip#/g,"".concat(a.name,": ").concat(a.y.toFixed(2),"%")),legends+=r.replace(/\#feedbackClass#/g,a.class).replace(/\#feedbackName#/g,a.name)})),a=a.replace("#bar#",o).replace("#legend#",legends),$("#portal-graph-area").html(a),$("#graph-loader").hide()}else $("#graph-loader").hide()}function s(e){if(e.length>0){var a=$("#projectgraphTemplate").text().trim(),t=$("#projectgraphBarTemplate").text().trim(),r=$("#projectgraphLegendTemplate").text().trim(),o=legends="";$("#project-graph-loader").show(),$("#project-graph-area").empty(),$(e).each((function(e,a){o+=t.replace(/\#feedbackClass#/g,a.class+(length==e&&a.y<=5?" small":"")).replace(/\#percentage#/g,a.y.toFixed(2)).replace(/\#tooltip#/g,"".concat(a.name,": ").concat(a.y.toFixed(2),"%")),legends+=r.replace(/\#feedbackClass#/g,a.class).replace(/\#feedbackName#/g,a.name)})),a=a.replace("#bar#",o).replace("#legend#",legends),$("#project-graph-area").html(a),$("#project-graph-loader").hide()}else $("#project-graph-loader").hide(),$("#project-graph-area").html("<p>"+message.select_project_message+"</p>")}$(document).ready((function(){if($.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),window.location.hash){var e=window.location.hash;$('.nav-tabs a[href="'+e+'"]').length>0&&$('.nav-tabs a[href="'+e+'"]').click()}$('.nav-tabs a[href="#appTab"]').length>=1?(r(),c(chartJson)):$('.nav-tabs a[href="#portalTab"]').length>=1?(o(),i(chartJsonPortal)):n(),$("#start_date").datepicker({autoclose:!0,todayHighlight:!0,format:"yyyy-mm-dd"}).on("changeDate",(function(){var e=new Date;""!=$(this).val()&&(e=$(this).val()),$("#end_date").datepicker("setStartDate",new Date(e)),new Date($("#end_date").val())<new Date($("#start_date").val())&&($("#end_date").val(""),$("#end_date").datepicker("setDate",null)),$("#start_date").valid()})),$("#end_date").datepicker({autoclose:!0,todayHighlight:!0,format:"yyyy-mm-dd"}).on("changeDate",(function(){$("#end_date").valid()})),Highcharts.wrap(Highcharts.seriesTypes.pie.prototype,"render",(function(e){e.call(this),this.circle||(this.circle=this.chart.renderer.circle(0,0,0).add(this.group)),0===this.total?this.circle.attr({cx:this.center[0],cy:this.center[1],r:this.center[2]/2,fill:"none",stroke:"silver","stroke-width":2}):this.circle.attr({"stroke-width":0})})),$(document).on("click","#npsSearch",(function(){$("#isFiltered").val(1),r()})),$(document).on("click","#resetNPSSearch",(function(){$("#isFiltered").val(0),$("#company").val("").trigger("change"),$("#feedBackType").val("").trigger("change"),r()})),$(document).on("click","#npsSearchPortal",(function(){$("#isFiltered").val(1),o()})),$(document).on("click","#resetNPSSearchPortal",(function(){$("#isFiltered").val(0),$("#companyPortal").val("").trigger("change"),$("#feedBackTypePortal").val("").trigger("change"),o()})),$(document).on("click","#projectSearch",(function(){$("#isFiltered").val(1),n()})),$(document).on("click","#resetprojectSearch",(function(){$("#isFiltered").val(0),l()})),$(document).on("change","#projectList",(function(){!function(){if(""!=$("#projectList option:selected").val()){var e=$('input[name="_token"]').val();$.ajax({type:"GET",url:url.getGraphData+"/"+$("#projectList option:selected").val(),data:{_token:e},crossDomain:!0,cache:!1,contentType:"json",success:function(e){var a=JSON.parse(e.result);s(a),""!=e.result&&null!=e.result&&null!=e.result&&a.length>0?toastr.success(message.graph_data_get_successfully):toastr.error(message.unable_get_graph_data)},error:function(e){s([]),toastr.error(message.unable_get_graph_data)}})}else s([])}()})),$(document).on("click","#copySurveyLink",(function(){var e,a,t=$(this).data("url");e=t,a=document.createElement("INPUT"),$("body").append(a),a.setAttribute("type","text"),a.setAttribute("value",e),a.select(),document.execCommand("copy"),toastr.success(message.survey_link_copied)})),$(".daterangesFromExportModel").datepicker({format:"yyyy-mm-dd",todayHighlight:!1,autoclose:!0,endDate:new Date,clearBtn:!0}),$(document).on("click","#appExport",(function(e){var a=$(this).data("isportal"),t=$(this).data("tab");$(this).attr("data-start"),$(this).attr("data-end");if($("#model-title").html($(this).data("title")),$("#email").val(loginemail).removeClass("error"),0==a){$("#queryString").val("");var r=$(".npsAppForm").serialize()}else{$("#queryString").val("");r=$(".npsPortalForm").serialize()}if($("#isPortal").val(a),$(".error").remove(),"undefined"!=t&&"project"==t){$("#exportNpsReport").attr("action",url.npsProjectExportUrl);r=$(".npsProjectForm").serialize()}"1"==$("#isFiltered").val()?$("#queryString").val(JSON.stringify(function(e){$(".daterangesFromExportModel").show();var a=e.substring(1).split("&").map((function(e){var a=e.split("=");return""!=a[1]&&$(".daterangesFromExportModel").hide(),a}));return Object.fromEntries(a)}("?"+r))):($("#queryString").val(""),$(".daterangesFromExportModel").show()),$(".loadingMsg").remove(),$("#export-model-box-confirm").prop("disabled",!1),$("#exportNpsReportMsg").hide(),$("#exportNps").show(),$("#export-model-box").attr("data-id",$(this).data("id")),$("#export-model-box").modal("show"),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}})})),$("#exportNpsReport").validate({errorClass:"error text-danger",errorElement:"span",highlight:function(e,a,t){$("span#email-error").addClass(a).removeClass(t)},unhighlight:function(e,a,t){$("span#email-error").removeClass(a).addClass(t)},rules:{email:{email:!0,required:!0}}}),$("#exportNpsReport").ajaxForm({beforeSend:function(){$(".page-loader-wrapper").fadeIn(),$("#exportNpsReport .card-footer button, #exportIntercompanychallenge .card-footer a").attr("disabled","disabled")},success:function(e){$("#exportNpsReport .card-footer button, #exportIntercompanychallenge .card-footer a").removeAttr("disabled"),$("#export-model-box").modal("hide"),1==e.status?toastr.success(e.data):toastr.error(e.data)},error:function(e){$("#exportNpsReport .card-footer button, #exportIntercompanychallenge .card-footer a").removeAttr("disabled"),e.responseJSON&&e.responseJSON.message&&""!=e.responseJSON.message?toastr.error(e.responseJSON.message):toastr.error(message.somethingWentWrong)},complete:function(e){$(".page-loader-wrapper").fadeOut(),$("#exportNpsReport .card-footer button, #exportIntercompanychallenge .card-footer a").removeAttr("disabled")}})})),$('a[data-bs-toggle="tab"]').on("click",(function(e){var a=$(this).attr("href");"#appTab"==a?($('.form-group input[type="text"]').val(""),$("#company").val("").trigger("change"),$("#feedBackType").val("").trigger("change"),r(),c(chartJson)):"#portalTab"==a&&($('.form-group input[type="text"]').val(""),$("#companyPortal").val("").trigger("change"),$("#feedBackTypePortal").val("").trigger("change"),i(chartJsonPortal),o()),"#projectTab"==a&&l()})),$(document).on("click","#projectSurveyDelete",(function(e){$("#delete-model-box").attr("data-id",$(this).data("id")),$("#delete-model-box").modal("show")})),$(document).on("click","#delete-model-box-confirm",(function(e){$(".page-loader-wrapper").show();var a=$("#delete-model-box").attr("data-id");$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({type:"DELETE",url:url.projectSurveyDelete+"/"+a,data:null,crossDomain:!0,cache:!1,contentType:"json",success:function(e){$("#ProjectFeedBackTable").DataTable().ajax.reload(null,!1),"true"==e.deleted?toastr.success(message.project_survey_deleted):"use"==e.deleted?toastr.error(message.project_survey_is_use):toastr.error(message.unable_delete_project_data);$("#delete-model-box").modal("hide"),$(".page-loader-wrapper").hide()},error:function(e){$("#ProjectFeedBackTable").DataTable().ajax.reload(null,!1),toastr.error(message.unable_delete_project_data);$("#delete-model-box").modal("hide"),$(".page-loader-wrapper").hide()}})}))}});